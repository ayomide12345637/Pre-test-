<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Melox Pre-Test Portal</title>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f4f4f4}

/* ---------- COURSE PAGE ---------- */
#coursePage{
 height:100vh;display:flex;justify-content:center;align-items:center;
 background:#1b5e20;
}
.courseBox{
 background:#fff;width:90%;max-width:380px;
 padding:30px;border-radius:14px;text-align:center;
}
.courseBox img{width:80px;margin-bottom:10px}
.courseBox h2{color:#1b5e20;margin-bottom:20px}
.courseBtn{
 width:100%;padding:14px;margin-top:10px;
 border:none;background:#c62828;color:#fff;
 font-weight:bold;border-radius:10px;
 font-size:16px;cursor:pointer;
}

/* ---------- LOGIN PAGE ---------- */
#loginPage{
 display:none;height:100vh;justify-content:center;align-items:center;
 background:#1b5e20;
}
#loginBox{
 background:#fff;width:90%;max-width:380px;
 padding:25px;border-radius:14px;text-align:center;
}
#loginBox img{width:80px;margin-bottom:10px}
#loginBox h2{color:#1b5e20;margin-bottom:15px}
#loginBox input{
 width:100%;padding:12px;font-size:16px;
 border-radius:8px;border:1px solid #ccc;margin-bottom:15px;
}
#loginBox button{
 width:100%;padding:12px;border:none;
 background:#c62828;color:#fff;font-weight:bold;
 border-radius:8px;font-size:16px;cursor:pointer;
}

/* ---------- PRE-TEST PAGE ---------- */
#preTestPage{display:none;flex-direction:column;height:100vh}
#preTestHeader{
 background:#1b5e20;color:#fff;padding:10px;
 display:flex;align-items:center;gap:8px;
}
#preTestHeader img{width:45px}
#headerCenter{flex:1;text-align:center}
#sectionTitle{font-weight:bold;font-size:16px}
#questionCount{font-size:14px}
#timer{
 background:#ffeb3b;color:#000;
 padding:6px 12px;border-radius:20px;
 font-weight:bold;font-size:15px;
}
#submitBtn{
 background:#c62828;color:#fff;border:none;
 padding:8px 12px;border-radius:8px;
 font-weight:bold;cursor:pointer;
}

#preTestBody{flex:1;padding:16px;overflow-y:auto}
#questionBox{
 background:#fff;padding:20px;border-radius:14px;
 box-shadow:0 5px 15px rgba(0,0,0,.15);
}
.option{
 display:block;padding:12px;margin-top:10px;
 border:1px solid #ddd;border-radius:10px;cursor:pointer;
}
.option input{margin-right:8px}

#nav{display:flex;gap:10px;margin-top:15px}
#nav button{
 flex:1;padding:12px;border:none;border-radius:10px;
 background:#1b5e20;color:#fff;font-weight:bold;
 cursor:pointer;
}

#grid{
 display:flex;flex-wrap:wrap;gap:8px;margin-top:20px;
}
#grid button{
 width:42px;height:42px;border-radius:6px;
 border:1px solid #ccc;background:#fff;
 font-weight:bold;cursor:pointer;
}
#grid .answered{background:#c62828;color:#fff}
#grid .current{border:3px solid #1b5e20}

/* ---------- RESULTS PAGE ---------- */
#resultPage{
 display:none;min-height:100vh;
 padding:20px;background:#f9fbe7;
}
#resultPage img{
 width:70px;display:block;margin:0 auto 10px;
}
.result-score{
 text-align:center;font-size:38px;font-weight:bold;
 color:#1b5e20;text-shadow:0 0 10px #ffeb3b;
}
.result-grade{
 text-align:center;font-size:28px;font-weight:bold;
 color:#c62828;margin-bottom:20px;
}
.review{
 background:#fff;padding:15px;border-radius:12px;
 margin-bottom:12px;
}
.correct{color:green;font-weight:bold}
.wrong{color:red;font-weight:bold}
</style>
</head>

<body>

<!-- COURSE SELECTION -->
<div id="coursePage">
 <div class="courseBox">
  <img src="https://i.imgur.com/7PeWEGa.jpeg">
  <h2>Select Course</h2>
  <button class="courseBtn" onclick="selectCourse('FAT 201')">FAT 201</button>
  <button class="courseBtn" onclick="selectCourse('APH 201')">APH 201</button>
  
 </div>
</div>

<!-- LOGIN PAGE -->
<div id="loginPage">
 <div id="loginBox">
  <img src="https://i.imgur.com/7PeWEGa.jpeg">
  <h2 id="courseTitle"></h2>
  <input type="text" id="department" placeholder="Enter Department">
  <button onclick="startTest()">Start Pre-Test</button>
 </div>
</div>

<!-- PRE TEST PAGE -->
<div id="preTestPage">
 <div id="preTestHeader">
  <img src="https://i.imgur.com/7PeWEGa.jpeg">
  <div id="headerCenter">
   <div id="sectionTitle"></div>
   <div id="questionCount"></div>
  </div>
  <div>
   <div id="timer">20:00</div>
   <button id="submitBtn" onclick="submitTest()">Submit</button>
  </div>
 </div>

 <div id="preTestBody">
  <div id="questionBox">
   <p id="questionText"></p>
   <div id="options"></div>
  </div>

  <div id="nav">
   <button onclick="prevQuestion()">Previous</button>
   <button onclick="nextQuestion()">Next</button>
  </div>

  <div id="grid"></div>
 </div>
</div>

<!-- RESULTS PAGE -->
<div id="resultPage">
<img src="https://i.imgur.com/7PeWEGa.jpeg">
 <div class="result-score" id="score"></div>
 <div class="result-grade" id="grade"></div>
 <div id="review"></div>
</div>

<script>

/* =============================
   PASTE QUESTIONS HERE
============================= */

const FAT_QUESTIONS = [
 /* ===== SECTION A: BASIC AQUACULTURE & FISH BIOLOGY (1–15) ===== */
{q:"Osmo-regulatory function in fish is performed by the:", o:["Gills","Skin","Kidneys","Fins"], a:1},
{q:"Types of aquaculture are:", o:["Monoculture and polyculture","Homoculture and polyculture","Monoculture and homoculture","Polyculture and heteraculture"], a:1},
{q:"African lady fish feed mostly on … in the brackish water.", o:["Plankton","Fish","Algae","Insects"], a:1},
{q:"……………… involves the cultivation of freshwater and saltwater organisms under controlled conditions.", o:["Capture fisheries","Aquaculture","Artisanal fishing","Industrial fishing"], a:1},
{q:"Fishes are used as raw material for ……….", o:["Fillets","Fertilizer","Feed","All of the above"], a:0},
{q:"………… is morphological feature that distinguishes a fish from other animals.", o:["Scales","Fins","Gills","Operculum"], a:1},
{q:"Hermaphroditism can pay off in situations where one sex is more likely to ……", o:["Migrate","Dominate","Spawn","Feed"], a:1},
{q:"………… in fish reduces the risk of cardiovascular disease, hypertension and arteriosclerosis.", o:["Omega-3 fatty acid","Vitamin D","Protein","Calcium"], a:0},
{q:"………… are examples of bony fish shapes.", o:["Compressiform and anguilliform","Fusiform and depressiform","All of the above","None of the above"], a:2},
{q:"Another name for bony fish is called ………", o:["Chondrichthyes","Osteichthyes","Agnatha","Cyclostomata"], a:1},
{q:"………… constitute the most significant fishery sector in Nigeria.", o:["Industrial fisheries","Artisanal fisheries","Aquaculture","Recreational fisheries"], a:1},
{q:"………… is the newly hatched young of an oviparous fish.", o:["Fry","Larvae","Fingerling","Juvenile"], a:1},
{q:"………… are the two types of viviparity.", o:["Histotrophic and hemotrophic","Lecithotrophic and matrotrophic","Ovoviviparous and viviparous","None of the above"], a:0},
{q:"………… are forms of interventions in fish farming to enhance production.", o:["Capture methods","Aquaculture","Stock enhancement","All of the above"], a:1},
{q:"………… are examples of fish body shapes.", o:["Fusiform, compressiform, anguilliform, taeniform, depressiform","Only fusiform and compressiform","Only anguilliform and depressiform","None of the above"], a:0},

/* ===== SECTION B: FISHERIES & POND MANAGEMENT (16–30) ===== */
{q:"Capture fisheries entails ……… for fishes in their natural habitats.", o:["Farming","Hunting","Breeding","Stocking"], a:1},
{q:"………… is a permanent water holding facility that requires a bulk of the initial capital.", o:["Cage","Pond","Tank","Raceway"], a:1},
{q:"The time it would take to recover capital put into fish farming would depend on the level of ………", o:["Stocking","Management","Feeding","Marketing"], a:1},
{q:"………… is keeping or protecting from change, loss or damage.", o:["Exploitation","Conservation","Harvesting","Overfishing"], a:1},
{q:"Fish egg is generally surrounded by ………", o:["Chorion","Zona pellucida","Vitelline membrane","All of the above"], a:0},
{q:"………… is a fishery management plan.", o:["Open season","Closed season","Open fishery","Closed fishery"], a:1},
{q:"Paired fin reduced to limb-like filament in family:", o:["Channidae","Protopteridae","Clariidae","Cichlidae"], a:1},
{q:"Fresh water bodies in Nigeria have …………… salinity level.", o:["Less than 1.0 PPT","Less than 0.5 PPT","More than 0.5 PPT","More than 1.0 PPT"], a:1},
{q:"Aquatic fauna of food values includes the following except:", o:["Cladocea","Algae","Periwinkle","Crustaceans"], a:1},
{q:"A representative of the family Channidae is ……………", o:["Parachanna obscura","Parachanna gariepinus","Tilapia obscura","Obscura tilapia"], a:0},
{q:"Biomass is the:", o:["Harvesting of fish","Volume of species given at a time","Percentage of drying fish","Discarded species"], a:1},
{q:"Aquarium fishes are ……………", o:["Recreational fishes","Big fishes","Ornamental fishes","Aesthetic fishes"], a:2},
{q:"Fish families of food values in Nigeria waters include the following except:", o:["Ariidae","Alestidae","Clariidae","Cladocae"], a:3},
{q:"Which of this is not needed for plant to produce food?", o:["Solar radiation","Temperature","Oxygen and nutrient availability","Wind"], a:3},
{q:"Basic needs for fish farming include the following except:", o:["Sunlight","Soil type","Legal ownership of land","Accessibility"], a:0},

/* ===== SECTION C: FISH BEHAVIOUR, MIGRATION & MARINE ECOSYSTEMS (31–50) ===== */
{q:"Schooling behavior in fish is characterized by:", o:["Random dispersion","Bunching with equal spacing and same direction","Aggressive territorial display","Solitary hovering"], a:1},
{q:"Anadromous migration means:", o:["Freshwater fish migrating to sea to spawn","Marine fish migrating to freshwater to spawn","Migration within freshwater only","Daily vertical movement"], a:1},
{q:"Catadromous fish like eels migrate from:", o:["Sea to freshwater for spawning","Freshwater to sea for spawning","River to lake only","Deep sea to surface"], a:1},
{q:"Potamodromous migration occurs:", o:["Between sea and freshwater","Within freshwater habitats only","Within marine environments only","Vertically in water column"], a:1},
{q:"The Sargasso Sea is the spawning destination for:", o:["Salmon","European and American eels","Tuna","Mahi-mahi"], a:1},
{q:"The main purpose of fish migration is to find:", o:["Only food","Suitable feeding, spawning, or refuge grounds","Only resting places","Only climatic changes"], a:1},
{q:"Vertical migration in fish is typically:", o:["Seasonal north-south movement","Daily movement up and down the water column","Permanent movement to deeper water","Shoreward movement to land"], a:1},
{q:"The brain region controlling smell in fish is the:", o:["Cerebellum","Olfactory bulbs","Optic lobes","Medulla oblongata"], a:1},
{q:"The cerebellum in fish is primarily responsible for:", o:["Thinking and memory","Coordinating muscle movements","Controlling heart rate","Processing smell"], a:1},
{q:"The medulla oblongata in fish controls:", o:["Vision","Breathing, heartbeat, and gill movements","Memory storage","Smell detection"], a:1},
{q:"Estuaries are highly productive because:", o:["They have constant high salinity","Nutrients from river and ocean mix in sheltered areas","They are very deep","They have no oxygen"], a:1},
{q:"Salt marshes are characterized by:", o:["Deep water with no tides","Regular flooding by tides and low-oxygen soil","Coral polyp growth","Open ocean conditions"], a:1},
{q:"Mangrove forests are important because:", o:["They provide nesting sites for birds and habitat for fish/crabs","They are found in cold regions","They have no root systems","They lack any animal life"], a:0},
{q:"Coral reefs are built primarily by:", o:["Sponges and seaweeds","Coral polyps secreting calcium carbonate","Crustaceans and mollusks","Deep-sea vents"], a:1},
{q:"The euphotic zone in the open ocean is:", o:["The dark deep-sea zone","The sunlit upper zone with photosynthesis","The twilight mesopelagic zone","The aphotic midnight zone"], a:1},
{q:"Organisms in the aphotic zone often rely on:", o:["Photosynthesis","Chemosynthesis at hydrothermal vents","Abundant sunlight","High oxygen levels"], a:1},
{q:"Camouflage behavior in fish is mainly used to:", o:["Attract mates","Protect from predators or hunt prey","Form schools","Signal aggression"], a:1},
{q:"Advertising coloration in fish is used to:", o:["Hide from predators","Send signals to other animals (e.g., warning or courtship)","Blend with environment","Defend territory only"], a:1},
{q:"The lateral line system in fish detects:", o:["Light and color","Sound, pressure changes, and water movement","Chemical odors","Temperature changes"], a:1},
{q:"Homeostasis in fish refers to:", o:["Rapid growth","Maintaining internal balance despite external changes","Only feeding behavior","Only migration"], a:1},
];

const APH_QUESTIONS = [
   /* ===== SECTION A: BASIC STRUCTURAL ORGANIZATION & TISSUES ===== */
{q:"The correct order of structural organization is:", o:["Tissue > Cell > Organ > System","Cell > Tissue > Organ > System","Organ > Cell > Tissue > System","System > Organ > Tissue > Cell"], a:1},
{q:"Epithelial tissue primarily:", o:["Conducts impulses","Covers and protects surfaces","Contracts","Binds tissues"], a:1},
{q:"Connective tissue:", o:["Supports and binds tissues","Conducts impulses","Contracts","Covers"], a:0},
{q:"Muscular tissue is responsible for:", o:["Conduction","Protection","Contraction and movement","Binding"], a:2},
{q:"Nervous tissue:", o:["Produces hormones","Conducts impulses","Contracts","Protects"], a:1},
{q:"Epithelial tissue is classified into:", o:["Simple and stratified epithelium","Cuboidal and nervous","Connective and muscular","Bone and cartilage"], a:0},
{q:"Simple squamous epithelium is:", o:["Thick","Plate-like and thin","Cube-shaped","Column-shaped"], a:1},
{q:"Simple cuboidal epithelium is found in:", o:["Brain","Ducts of glands","Heart","Skin"], a:1},
{q:"Simple columnar epithelium occurs in:", o:["Digestive tract","Bone","Muscle","Blood"], a:0},
{q:"Stratified squamous epithelium occurs in:", o:["Skin","Liver","Kidney","Brain"], a:0},
{q:"Transitional epithelium is found in:", o:["Heart","Stomach","Urinary bladder","Lung"], a:2},

/* ===== SECTION B: CONNECTIVE TISSUE & SUPPORTING STRUCTURES ===== */
{q:"Reticular tissue forms framework of:", o:["Muscle","Lymphatic organs","Skin","Brain"], a:1},
{q:"Adipose tissue stores:", o:["Water","Protein","Fat","Oxygen"], a:2},
{q:"Cartilage cells are called:", o:["Osteocytes","Chondrocytes","Myocytes","Neurons"], a:1},
{q:"Bone cells are called:", o:["Myocytes","Osteocytes","Neutrophils","Platelets"], a:1},
{q:"Blood is:", o:["Muscular tissue","Connective tissue","Nervous tissue","Epithelial tissue"], a:1},

/* ===== SECTION C: NERVOUS & MUSCLE TISSUE + CELL BASICS ===== */
{q:"Functional unit of nervous system:", o:["Neuron","Osteon","Myofibril","Alveolus"], a:0},
{q:"Powerhouse of the cell:", o:["Ribosome","Mitochondria","Lysosome","Nucleus"], a:1},
{q:"Control center of the cell:", o:["Cytoplasm","Nucleus","Ribosome","Golgi body"], a:1},
{q:"Protein synthesis occurs in:", o:["Lysosome","Ribosome","Nucleus","Centriole"], a:1},
{q:"Basic unit of life:", o:["Tissue","Cell","Organ","System"], a:1},
{q:"Study of tissues is:", o:["Cytology","Histology","Anatomy","Physiology"], a:1},
{q:"Study of cells:", o:["Histology","Cytology","Pathology","Embryology"], a:1},

/* ===== SECTION D: MUSCLE TYPES & BODY SYSTEMS OVERVIEW ===== */
{q:"Involuntary muscle:", o:["Skeletal","Cardiac","Voluntary","Smooth (voluntary)"], a:1},
{q:"Voluntary muscle:", o:["Skeletal muscle","Cardiac","Smooth","Blood"], a:0},
{q:"Smooth muscle is found in:", o:["Bones","Walls of internal organs","Brain","Skin"], a:1},
{q:"The largest organ of the body:", o:["Liver","Skin","Heart","Brain"], a:1},
{q:"Longest bone in the body:", o:["Tibia","Femur","Humerus","Radius"], a:1},

/* ===== SECTION E: BLOOD, CIRCULATION & RESPIRATION ===== */
{q:"RBC is produced in:", o:["Kidney","Bone marrow","Liver","Spleen"], a:1},
{q:"Normal human body temperature:", o:["35°C","36°C","37°C","38°C"], a:2},
{q:"Number of chambers in the heart:", o:["2","3","4","5"], a:2},
{q:"Organ that pumps blood:", o:["Lung","Heart","Liver","Kidney"], a:1},
{q:"Largest artery:", o:["Pulmonary artery","Aorta","Femoral artery","Carotid"], a:1},
{q:"Gas exchanged in lungs:", o:["Nitrogen","Oxygen and Carbon dioxide","Hydrogen","Methane"], a:1},
{q:"Blood group universal donor:", o:["A","B","AB","O negative"], a:3},
{q:"Universal recipient:", o:["O","A","AB positive","B"], a:2},
{q:"The red pigment in blood is:", o:["Myoglobin","Hemoglobin","Melanin","Keratin"], a:1},
{q:"The normal pulse rate of an adult is approximately:", o:["40 bpm","60–100 bpm","120 bpm","150 bpm"], a:1},

/* ===== SECTION F: ENDOCRINE, DIGESTION & EXCRETION ===== */
{q:"Hormones are secreted by:", o:["Exocrine glands","Endocrine glands","Sweat glands","Sebaceous glands"], a:1},
{q:"Largest gland:", o:["Thyroid","Liver","Pancreas","Adrenal"], a:1},
{q:"Digestion of food begins in the:", o:["Stomach","Mouth","Small intestine","Large intestine"], a:1},
{q:"The enzyme in saliva is:", o:["Pepsin","Amylase","Lipase","Trypsin"], a:1},
{q:"The organ responsible for detoxification is:", o:["Kidney","Liver","Heart","Lung"], a:1},
{q:"The pancreas produces:", o:["Insulin","Bile","Saliva","Thyroxine"], a:0},
{q:"The organ that stores bile is the:", o:["Liver","Gallbladder","Pancreas","Kidney"], a:1},
{q:"The main function of the large intestine is:", o:["Digestion","Absorption of water","Hormone production","Oxygen exchange"], a:1},
{q:"The hormone that regulates blood sugar is:", o:["Adrenaline","Insulin","Thyroxine","Estrogen"], a:1},

/* ===== SECTION G: SENSORY ORGANS, BONES & MISCELLANEOUS ===== */
{q:"The largest part of the brain is:", o:["Cerebellum","Medulla","Cerebrum","Pons"], a:2},
{q:"The main organ of respiration is the:", o:["Heart","Lung","Liver","Brain"], a:1},
{q:"The organ that filters blood is:", o:["Liver","Kidney","Lung","Spleen"], a:1},
{q:"The smallest bone in the body is:", o:["Femur","Stapes","Radius","Ulna"], a:1},
{q:"The joint that allows movement in all directions is:", o:["Hinge joint","Pivot joint","Ball and socket joint","Gliding joint"], a:2},
{q:"The sense organ for taste is the:", o:["Nose","Tongue","Ear","Skin"], a:1},
{q:"The largest lymphatic organ is the:", o:["Kidney","Liver","Spleen","Pancreas"], a:2},
{q:"White blood cells help in:", o:["Oxygen transport","Immunity and defense","Clotting","Digestion"], a:1},
{q:"Platelets are responsible for:", o:["Immunity","Clotting of blood","Oxygen transport","Hormone secretion"], a:1},
{q:"The number of bones in an adult human is:", o:["200","206","210","196"], a:1},
{q:"The part of the brain that controls balance is:", o:["Cerebrum","Cerebellum","Medulla","Pons"], a:1},
{q:"The medulla oblongata controls:", o:["Thinking","Voluntary movement","Breathing and heartbeat","Memory"], a:2},
{q:"The strongest muscle in the body (by force) is:", o:["Biceps","Masseter","Quadriceps","Triceps"], a:1},
{q:"The organ responsible for vision is the:", o:["Ear","Nose","Eye","Skin"], a:2},
{q:"The fluid inside joints is called:", o:["Plasma","Synovial fluid","Lymph","Serum"], a:1},
{q:"The hormone responsible for growth is:", o:["Insulin","Growth hormone","Thyroxine","Progesterone"], a:1},
{q:"The main organ of the endocrine system is the:", o:["Liver","Pituitary gland","Lung","Spleen"], a:1},
{q:"The main function of red blood cells is:", o:["Immunity","Oxygen transport","Clotting","Hormone transport"], a:1},
{q:"The heart is located in the:", o:["Abdomen","Pelvic cavity","Thoracic cavity","Cranial cavity"], a:2},
{q:"The diaphragm helps in:", o:["Digestion","Breathing","Circulation","Excretion"], a:1},
{q:"The smallest functional unit of bone is:", o:["Nephron","Osteon","Sarcomere","Axon"], a:1},
{q:"The main function of the skin is:", o:["Hormone secretion","Protection","Digestion","Respiration"], a:1},
{q:"The appendix is attached to the:", o:["Small intestine","Large intestine (cecum)","Stomach","Liver"], a:1},
{q:"The organ that produces sperm in males is the:", o:["Penis","Testis","Prostate","Urethra"], a:1},
{q:"The organ that produces ova in females is the:", o:["Uterus","Ovary","Cervix","Vagina"], a:1},
{q:"The normal pH of blood is approximately:", o:["6.0","7.4","8.5","5.5"], a:1},
{q:"The largest part of the respiratory system is the:", o:["Trachea","Lung","Bronchi","Larynx"], a:1},
{q:"The voice box is the:", o:["Pharynx","Larynx","Trachea","Bronchus"], a:1},
{q:"The main function of the kidney is:", o:["Digestion","Filtration and excretion","Respiration","Circulation"], a:1},
{q:"The organ responsible for pumping oxygenated blood to the body is the:", o:["Right atrium","Left ventricle","Right ventricle","Left atrium"], a:1},
{q:"Homeostasis means:", o:["Growth","Balance of internal environment","Movement","Respiration"], a:1},
];

/* ============================= */

let selectedCourse="";
let questions=[];
let current=0, answers=[], time=1200, timer;

/* COURSE SELECT */
function selectCourse(course){
 selectedCourse=course;
 coursePage.style.display="none";
 loginPage.style.display="flex";
 courseTitle.textContent=course+" Pre-Test";
}

/* START TEST */
function startTest(){
 if(!department.value.trim()) return alert("Enter department");

 questions = selectedCourse==="FAT 201" ? FAT_QUESTIONS : APH_QUESTIONS;

 if(questions.length===0) return alert("No questions added yet.");

 loginPage.style.display="none";
 preTestPage.style.display="flex";

 loadGrid();
 showQuestion();
 startTimer();
}

/* TIMER */
function startTimer(){
 timer=setInterval(()=>{
  let m=Math.floor(time/60);
  let s=time%60;
  timerEl.textContent=`${m}:${s<10?"0":""}${s}`;
  time--;
  if(time<0) submitTest();
 },1000);
}

/* SHOW QUESTION */
function showQuestion(){
 questionCount.textContent=`Question ${current+1} of ${questions.length}`;
 questionText.textContent=questions[current].q;

 let html="";
 questions[current].o.forEach((opt,i)=>{
  html+=`
  <label class="option">
   <input type="radio" name="opt"
    ${answers[current]==i?"checked":""}
    onclick="selectAnswer(${i})">
   ${opt}
  </label>`;
 });
 options.innerHTML=html;
 updateGrid();
}

function selectAnswer(i){ answers[current]=i; updateGrid(); }

function loadGrid(){
 let html="";
 for(let i=0;i<questions.length;i++){
  html+=`<button onclick="goToQuestion(${i})">${i+1}</button>`;
 }
 grid.innerHTML=html;
}

function updateGrid(){
 const btns=grid.querySelectorAll("button");
 btns.forEach((b,i)=>{
  b.classList.remove("answered","current");
  if(answers[i]!==undefined) b.classList.add("answered");
  if(i===current) b.classList.add("current");
 });
}

function nextQuestion(){if(current<questions.length-1){current++;showQuestion();}}
function prevQuestion(){if(current>0){current--;showQuestion();}}
function goToQuestion(i){current=i;showQuestion();}

/* SUBMIT */
function submitTest(){
 clearInterval(timer);
 preTestPage.style.display="none";
 resultPage.style.display="block";

 let score=0, reviewHTML="";
 questions.forEach((q,i)=>{
  let correct=q.a===answers[i];
  if(correct) score++;
  reviewHTML+=`
  <div class="review">
   <b>Q${i+1}: ${q.q}</b><br>
   <span class="${correct?"correct":"wrong"}">
    Your answer: ${q.o[answers[i]]||"No answer"}
   </span><br>
   <span class="correct">Correct: ${q.o[q.a]}</span>
  </div>`;
 });

 score.textContent=`${score} / ${questions.length}`;

 let grade="F";
 if(score>=70) grade="A";
 else if(score>=60) grade="B";
 else if(score>=50) grade="C";
 else if(score>=40) grade="D";

 grade.textContent=`Grade: ${grade}`;
 review.innerHTML=reviewHTML;
}

/* SHORTCUTS */
const coursePage=document.getElementById("coursePage");
const loginPage=document.getElementById("loginPage");
const preTestPage=document.getElementById("preTestPage");
const resultPage=document.getElementById("resultPage");
const department=document.getElementById("department");
const courseTitle=document.getElementById("courseTitle");
const questionCount=document.getElementById("questionCount");
const questionText=document.getElementById("questionText");
const options=document.getElementById("options");
const grid=document.getElementById("grid");
const timerEl=document.getElementById("timer");
const score=document.getElementById("score");
const grade=document.getElementById("grade");
const review=document.getElementById("review");

</script>

</body>
</html>
